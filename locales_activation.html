<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Locales activation | Crystal I18n</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/assets/img/favicon.png">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.cc820722.css" as="style"><link rel="preload" href="/assets/js/app.afd68869.js" as="script"><link rel="preload" href="/assets/js/2.595070cb.js" as="script"><link rel="preload" href="/assets/js/12.0a964310.js" as="script"><link rel="prefetch" href="/assets/js/10.f8704b9d.js"><link rel="prefetch" href="/assets/js/11.b003be98.js"><link rel="prefetch" href="/assets/js/13.0dc87bd5.js"><link rel="prefetch" href="/assets/js/14.87e4cf17.js"><link rel="prefetch" href="/assets/js/15.979aa6ce.js"><link rel="prefetch" href="/assets/js/16.21b81319.js"><link rel="prefetch" href="/assets/js/17.20c45ca7.js"><link rel="prefetch" href="/assets/js/18.25c4da8f.js"><link rel="prefetch" href="/assets/js/3.e1ad554d.js"><link rel="prefetch" href="/assets/js/4.09fd2c39.js"><link rel="prefetch" href="/assets/js/5.fc791712.js"><link rel="prefetch" href="/assets/js/6.ffe6f60a.js"><link rel="prefetch" href="/assets/js/7.9063585b.js"><link rel="prefetch" href="/assets/js/8.0ce4b2af.js"><link rel="prefetch" href="/assets/js/9.8acb19f7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cc820722.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="Crystal I18n" class="logo"> <span class="site-name can-hide">Crystal I18n</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ref/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/crystal-i18n/i18n" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ref/index.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  API
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/crystal-i18n/i18n" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/getting_started.html" class="sidebar-link">Getting started</a></li><li><a href="/locales_activation.html" aria-current="page" class="active sidebar-link">Locales activation</a></li><li><a href="/translation_lookups.html" class="sidebar-link">Translation lookups</a></li><li><a href="/localization.html" class="sidebar-link">Localization</a></li><li><a href="/configuration.html" class="sidebar-link">Configuration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Project</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CHANGELOG.html" class="sidebar-link">Changelog</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="locales-activation"><a href="#locales-activation" class="header-anchor">#</a> Locales activation</h1> <p>The current locale - which is used for <a href="/translation_lookups">translation lookups</a> or <a href="/localization">localizations</a> -
can be specified using the <code>#locale=</code> method (or <code>#activate</code> - both are equivalent):</p> <div class="language-crystal extra-class"><pre class="language-crystal"><code><span class="token constant">I18n</span><span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token symbol">:fr</span>
<span class="token constant">I18n</span><span class="token punctuation">.</span>activate<span class="token punctuation">(</span><span class="token symbol">:fr</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Locale changes like in the above example are always pseudo-global and are scopped to the current fiber.</p></div> <p>Unless explicitly set, the default locale (<code>en</code> if not configured in <code>I18n.config.default_locale</code>) is used instead.</p> <p>When activating a locale with <code>#locale=</code> or <code>#activate</code>, all further translations or localizations will be done
using the specified locale. If the specified locale is not part of the available locales (either because it was not part
of the loaded translations or because it was not part of the <code>I18n.config.available_locales</code> array), an
<code>I18n::Errors::InvalidLocale</code> exception is raised.</p> <p>Crystal I18n also provides the ability to execute a block with a specific locale activated. In order to do so, the
<code>#with_locale</code> method can be used as follows:</p> <div class="language-crystal extra-class"><pre class="language-crystal"><code><span class="token constant">I18n</span><span class="token punctuation">.</span>with_locale<span class="token punctuation">(</span><span class="token symbol">:fr</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
  <span class="token constant">I18n</span><span class="token punctuation">.</span>t<span class="token punctuation">(</span><span class="token string">&quot;simple.translation&quot;</span><span class="token punctuation">)</span> <span class="token comment"># Will output a text in french</span>
<span class="token keyword">end</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><code>#with_locale</code> should be used over <code>#locale=</code> or <code>#activate</code> in most cases since it will ensure that the previously
activated locale is activated again once the block execution finishes. This is especially relevant in the context of web
requests processing where a locale matching a given HTTP request has to be activated. In this context, using <code>#locale=</code>
could lead into subsequent requests using the previously activated locale if the later was not reset to its previous
value after finishing processing the request.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/getting_started.html" class="prev">
        Getting started
      </a></span> <span class="next"><a href="/translation_lookups.html">
        Translation lookups
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.afd68869.js" defer></script><script src="/assets/js/2.595070cb.js" defer></script><script src="/assets/js/12.0a964310.js" defer></script>
  </body>
</html>
